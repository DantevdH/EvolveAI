name: Test Secrets

on:
  workflow_dispatch:  # Manual trigger only

jobs:
  test-secrets:
    name: Test GitHub Secrets
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        
      - name: Test Supabase URL
        run: |
          if [ -n "$SUPABASE_URL" ]; then
            echo "‚úÖ SUPABASE_URL is set"
            echo "URL: $SUPABASE_URL"
          else
            echo "‚ùå SUPABASE_URL is not set"
            exit 1
          fi
        env:
          SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
          
      - name: Test Supabase Anon Key
        run: |
          if [ -n "$SUPABASE_ANON_KEY" ]; then
            echo "‚úÖ SUPABASE_ANON_KEY is set"
            echo "Key starts with: ${SUPABASE_ANON_KEY:0:20}..."
          else
            echo "‚ùå SUPABASE_ANON_KEY is not set"
            exit 1
          fi
        env:
          SUPABASE_ANON_KEY: ${{ secrets.SUPABASE_ANON_KEY }}
          
      - name: Test OpenAI API Key
        run: |
          if [ -n "$OPENAI_API_KEY" ]; then
            echo "‚úÖ OPENAI_API_KEY is set"
            echo "Key starts with: ${OPENAI_API_KEY:0:20}..."
          else
            echo "‚ùå OPENAI_API_KEY is not set"
            exit 1
          fi
        env:
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
          
      - name: All secrets verified
        run: |
          echo "üéâ All secrets are properly configured!"
          echo "Your CI workflows should now work correctly."